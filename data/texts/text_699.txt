The effects of social media on critical issues, such as polarization and misinformation, are under scrutiny due to the disruptive consequences that these phenomena can have on our societies. Among the algorithms routinely used by social media platforms, people-recommender systems are of special interest, as they directly contribute to the evolution of the social network structure, affecting the information and the opinions users are exposed to. In this paper, we propose a framework to assess the effect of people recommenders on the evolution of opinions. Our proposal is based on Monte Carlo simulations combining link recommendation and opinion-dynamics models. In order to control initial conditions, we deﬁne a random network model to generate graphs with opinions, with tunable amounts of modularity and homophily. We join these elements into a methodology to study the effects of the recommender system on echo chambers and polarization. We also show how to use our framework to measure, by means of simulations, the impact of different intervention strategies. Our thorough experimentation shows that people recommenders can in fact lead to a signiﬁcant increase in echo chambers. However, this happens only if there is considerable initial homophily in the network. Also, we ﬁnd that if the network already contains echo chambers, the effect of the recommendation algorithm is negligible. Such ﬁndings are robust to two very different opinion dynamics models, a bounded conﬁdence model and an epistemological model. Social media have signiﬁcantly transformed how the general public consumes information, to such an extent that many contemporary political events in the world have been connected to social media usage, from Arab Spring (Khondker 2011) to Donald Trump election (Enli 2017). Due to their disruptive potentiality, the algorithms adopted by social media platforms have been, rightfully, under scrutiny: in fact, such platforms are suspected of contributing to the polarization of opinions by means of the so-called “echochamber” effect, due to which users tend to interact with like-minded individuals, reinforcing their own ideological ICWSM 2022, June 6–9, 2022, Atlanta, Georgia, and Online Copyright © 2022, Association for the Advancement of Artiﬁcial Intelligence (www.aaai.org). All rights reserved. viewpoint, and thus getting more and more polarized in the long run. Among all types of algorithms potentially responsible for strengthening echo chambers, people-recommender systems (e.g. “People You May Know” in Facebook or “Who to Follow” in Twitter) are of special interest, as they directly contribute to the evolution of the social network structure, thus affecting the information and the opinions a user is exposed to. People recommenders mainly take advantage of two types of information to recommend who to follow: network structure (e.g., recommending friends of friends) or content (e.g., recommending users with similar interests) (Barbieri, Bonchi, and Manco 2014). As such, one might expect that homophilic links are more likely to be recommended than heterophilic ones, contributing to the formation of echo chambers. As in a vicious loop, echo chambers might in turn make homophilic links more likely to be recommended in the future. To hold algorithm designers and platforms accountable for the effects of their systems, we need to develop tools to measure such effects. Therefore, the main research question we tackle in this work is the following: how can we assess the effect of people recommenders on echo chambers and polarization? We tackle this research question by means of a principled approach that, by combining an opinion dynamics model with a given people-recommender algorithm, is able to simulate the behavior of individuals changing their opinions as a consequence of their interactions with their neighborhood, within a social network that is continuously evolving. Method. For what concerns opinion dynamics, we adopt two very different and complementary models: the classic Bounded Conﬁdence Model (Deffuant et al. 2000), and the epistemological model by Bala and Goyal (1998). The former assumes opinions are equivalent; interaction happens by people close enough in their opinions (i.e., within their bounded conﬁdence interval) getting closer to each other. The latter assumes that opinions are not equivalent: one of the antipodes is a factual truth and the other is its negation. Each agent, while performing observations of the world, forms an opinion about a statement, that might be true or false. During interactions, agents exchange the observations they made and update their opinions accordingly. An example of the ﬁrst model is a typical political debate (e.g., the Stay-Leave dichotomy during the Brexit campaign), while an example of the second model is the tension between a hoax (e.g., “vaccines cause autism”) and the scientiﬁc evidence (e.g., “vaccines do not cause autism”). As people recommenders, we adopt several state-ofthe-art link predictors (Liben-Nowell and Kleinberg 2007) which are based on the network structure only, and one recommender which is biased by the opinions of the agents. In order to assess the dependence of our results on initial conditions, we develop a random network model with opinions, extending the model by Lancichinetti, Fortunato, and Radicchi (2008). Finally, we develop a series of metrics and techniques to examine whether the presence of echo chambers and polarization in the network increases or decreases as a consequence of the recommender. Our approach, dubbed PROD (as it enables to study the effects of People Recommenders on Opinion Dynamics), can also assess whether such consequences are statistically signiﬁcant. Findings. Our main contribution is therefore the deﬁnition of a novel framework to assess the effect of any recommendation algorithm on echo chambers and polarization. We do not place any assumption on the given recommender, which is seen as a black-box. The results we can draw from our thorough experimentation are summarised as follows: 1. People recommenders can strengthen echo chambers, as long as homophilic links are initially more present than heterophilic ones. 2. This effect becomes negligible (or even reversed) if the network is already segregated in polarized communities. 3. The above ﬁndings are consistent between different opinion dynamics models and recommender algorithms. 4. However, differences between recommenders can be observed: some recommenders dramatically contribute to polarization, while others do so only slightly and only under certain assumptions. Summing up, we show that people recommenders can amplify the intrinsic homophilic bias in a social network, contributing to the creation of echo chambers, where each node is surrounded by like-minded neighbors. Finally, we also showcase the usage of our framework to simulate the effects of three different intervention policies, aimed at mitigating echo-chambers and polarization effects. Our results show that a mitigation strategy which tries to recommend users to users with different opinions, might be effective in reducing the appearance of echo-chambers and polarization. Despite the increasing attention received by the research community, the role played by social media in opinion formation remains an important open question. Many studies suggest that social media users tend to access information from a narrow spectrum of opinions, forming “social bubbles” of homogenous individuals (Nikolov et al. 2015; Pariser 2011), possibly as a consequence of algorithmic ﬁltering. In this perspective, since users within homogenous bubbles tend to produce and consume more information that conﬁrms their preconceptions, social media might turn into echo chambers (Quattrociocchi, Scala, and Sunstein 2016), reinforcing their beliefs. However, this view is far from unanimous. Some researchers consider that ideological segregation in social-media usage has been overestimated (Barber´a et al. 2015; Garrett 2009). Bakshy, Messing, and Adamic (2015), through an empirical analysis of Facebook data, suggests that algorithmic ranking produces, in fact, more exposition to diverse viewpoints. Fletcher and Kleis Nielsen (2017) conﬁrm, through surveys, that casual social media users get exposed to more points of view than similar people who do not use social media at all. Morales, Monti, and Starnini (2021) show that in the Reddit political community, users of opposite leaning are more likely to interact than users with similar leaning; also, they show that geographical echo chambers might actually play a larger role. Others have noted that echo chambers observed online could be, in fact, originating ofﬂine (Bastos, Mercea, and Baronchelli 2018), thus motivating the need to consider different possible pre-existing levels of homophily when studying the relationship between algorithms and polarization. Finally, Cinelli et al. (2021) found evidence of echo chambers on Facebook, but not on Reddit, showing that there exist differences between different social media platforms that might depend on different content recommendation mechanisms. Our contribution in this debate lies in a principled approach to assess, through simulations, the effects of peoplerecommender algorithms on opinion dynamics. Few recent studies address similar research questions. Sˆırbu et al. (2019) show that algorithmic bias can slow down the convergence of an opinion dynamics model, and contribute to fragmentation, but they do not study the effect of people recommenders. Perra and Rocha (2019) study the effect of different information ﬁltering policies by designing a novel opinion dynamics model; they ﬁnd a strong effect when the information received by a user is biased towards their opinion, and that some network conﬁgurations can reinforce such effect. Fabbri et al. (2020) study the effects of people recommender systems on the visibility of users in a network divided in two subgroups (e.g., males and females, or democrats and republicans), and with different levels of initial homophily. They show that homophily plays a key role in the visibility given to different groups: when the minority is homophilic, there is a disparate visibility in favor of the minority class; when the minority is not homophilic, the dis-parate visibility is in favor of the majority class. Sasahara et al. (2021) focus on user-driven rather than platform-induced behavior, showing that a small bias can lead to a segregated social network. Finally, de Arruda et al. (2021) recently proposed a novel opinion dynamics model that incorporates the interaction with an idealized recommender. They found that the rise of echo chambers crucially depends on the role of the social network platform, expressed as a probability distribution of content being seen by others. In this work, instead, we focus on existing recommender algorithms, and study their effects on well-known opinion dynamics models, through their interactions with the network structure. Input. PROD takes as main input a directed social graph G = (V, E, O) where an arc (u, v) ∈ E indicates that u follows v, while O : V → [0, 1] is a function assigning to each node in the network an opinion. The other main input is a link recommender, that we can think as a function `: V → V × [0, 1]. Given a node u ∈ V , the function assigns a recommended node v ∈ V such that (u, v) /∈ E and a probability p∈ [0, 1]. Such probability represents the strength of the recommendation given to u to start following v or, alternatively, the probability that u will accept the recommendation and start following v, thus adding the new link (u, v) to E. On top of these two main ingredients—a graph with opinions, and a recommender—PROD adds a given opinion dynamics model (ODM). ODMs are expressed with an update rule, which modiﬁes the opinions of two nodes that interact. Framework overview. Given this input, PROD operates according to the pseudocode in Algorithm 1. For a number of time steps T, nodes are visited sequentially in random order (lines 3-5). At each time step, every node interacts with S other nodes, according to the update rule of the opinion dynamics model. There are two ways interactions can happen: through newly created links (lines 10-19) or through pre-existing links (lines 20-23). In the former case, the ODM and the link recommender work jointly, while the latter case is a typical step of an ODM. More in detail. In the ﬁrst case, the recommender algorithm is asked for a node v to recommend to u (line 10). Together with the node v, the algorithm will also return the score p∈ [0, 1]—the probability of the recommendation being accepted. If the recommendation (u, v) is accepted, the interaction happens (according to the ODM), and the new link is added to the network. After doing this, we perform a rewiring, in order to model the well-known concept of attention budget: since time and attention are limited resources, users interact with a small set of neighbors (Golder, Wilkinson, and Huberman 2007; Huberman, Romero, and Wu 2008), even if nominally they declare a larger number of friends on social media. To keep this fact in consideration, whenever u starts to follow another node v, we remove one of its old neighbors at random. This mechanism will also keep the overall density of the network stable, letting us attribute any observed effect to the recommender algorithm itself, rather than to a densiﬁcation of the graph. When a given number of total recommendations R is reached, the recommender stops and lets the ODM work alone, to let emerge any long-term effect of the ﬁnal graph on the opinion distribution. We calibrate the internal parameter α such that these two regimes (the one with link recommender and ODM cooperating and the one purely ODMbased) last approximatelytime steps each, to keep the simulations for different recommenders with the same amount of recommendations Rand the same number interactions between nodes (S · |V | · T). In the rest of this section, we are going to discuss the two main ingredients of PROD: the opinion dynamics model and the people-recommender algorithm. Input: Graph with opinions G = (V, E, O), Parameters: interactions per time step S ∈ N. 3.1 Opinion dynamics models We consider two complementary models: the classic Bounded Conﬁdence Model (Deffuant et al. 2000), and the epistemological model by Bala and Goyal (1998). As already discussed in Section 1 these two models are very different and complementary. We next see them in details. Bounded Conﬁdence Model (BCM). In BCM, interactions modify the opinions of the nodes only when they are within a conﬁdence interval  ∈ [0, 1] from each other. If they are, when u interacts with v, u moves closer to v’s opinion. The strength of the interaction is represented by convergence parameter µ ∈ [0, 0.5]. The update rule of BCM is therefore deﬁned by: o=o+ µ · (o− o) if |o− o| < ootherwise Epistemological model. This model describes how a network of agents would form an opinion about a statement, that might be true or false. Consider for example a group of clinicians which use a drug X with a constant and known probability of success (p= 0.5). Suppose that a new drug Y, with an unknown probability of success, is introduced. Each clinician tries the new drug in some experiments, shares the results with his network, and then updates his belief on the new drug using all the data acquired. As in the model introduced by Bala and Goyal (1998), we consider: (i) two Bernoulli random variables {x, x}, which represent the actions of the agents (e.g. using the known drug or experimenting with the new one); (ii) a “true” state of the world θ, that deﬁnes their probability of success θ = [p(x) = 0.5, p(x) = 0.5 + ]. The parameter  ∈ (0, 0.5] represents the gain of xover xin expectation, but it is completely unknown to the agents; in fact, agents need to form an opinion on whether  > 0 is true, or not. Each agent, in fact, has a (normalized) belief o(θ) on the state of the world θ, which drives their next action. Two possible outcomes can arise: (i) the agent hypothesizes that  is negative (i.e. the probability of success of the new drug is less than the previous), and they performs action xfor n times, giving a ﬁxed outcome of; (ii) their hypothesis is that  > 0, which implies that p(x) > p(x) and therefore they perform action x. In this case, the outcome of the n experiments is a Binomial distribution with p(x) = 0.5 + . Finally, when agent u interacts with v over the arc (u, v), they update their beliefs by considering the experiments performed by v (if any), according to a Bayesian learning model: where kis the number of successes obtained by v in their n experiments. 3.2 People-recommender algorithms People recommenders are key services in social media and social networking platforms. Although early people recommenders were essentially performing link prediction using only the graph structure as input information (Liben-Nowell and Kleinberg 2007), modern algorithms often combine different sources of information through learning techniques: see (Guy 2018) for a recent survey. However, for sake of simplicity, we can consider two main types of information as input to the people recommenders: the network structure (e.g., recommending friends of friends), content, activity and behavioural information (e.g., recommending users with similar interests). Given that in our model we only have the graph structure and user opinions, we consider three scalable state-of-theart link prediction methods that only use the network structure —Jaccard Index, Personalized PageRank (Kumar et al. 2020), and SALSA (Gupta et al. 2013; Guy 2018)— and a method which relies on users opinions. All the methods we consider (presented in details next) accept as input a directed social graph. Directed Jaccard index (DJI). Let us indicate with N(u) the out-neighbors set for the node u, and with N(u) its in-neighbors set, on the given directed graph G = (V, E). DJI(u, v) =|N(u) ∩ N(u)||N(u)| + |N(v)| − |N(u) ∩ N(u)| Personalized PageRank (PPR). Given the adjacency matrix A associated to a directed graph G = (V, E), where each entry a= 1 iff (i, j) ∈ E, and its column-stochastic version A(i.e. each entry is the probability to transition from i to j), the global PageRank vector p is the solution of a linear system (Page et al. 1999; Gleich 2015) and satisﬁes where d is called damping factor and 1 − d is the teleportation probability, representing the probability that a random walker transits randomly to another node extracted with uniform distribution r deﬁned over V . Setting r =, where is a |V |-dimensional vector with 1 at the uentry, reduces the solution of Eq. 2 to the Personalized PageRank (PPR) for node u. SALSA. In (Gupta et al. 2013), the Who To Follow service technology architecture implemented by Twitter is depicted along with the algorithm used for the recommendations. The proposed model makes use of SALSA algorithm proposed by Lempel and Moran (2001). SALSA is a link-analysis algorithm, of the same family of the well-known HITS (Kleinberg 1999). The algorithm used in our work follows the schema described by the same authors of (Gupta et al. 2013) in a subsequent paper (Goel et al. 2015), using a scorepropagation strategy. Given a user u ∈ V , SALSA builds a bipartite graph G= (V, V, E), where Vis the set of hubs, i.e. the nodes with top-k value of Personalized PageRank on node u, and Vis the set of authorities, i.e. the nodes the hubs follows in the original graph G. Each directed edge (i, j) ∈ E becomes a directed edge (i, j) ∈ E. Let M be the matrix with dimension (|V|, |V|), where M= 1 iff (j, i) ∈ E, zero otherwise. Let Mbe the matrix M with each non-zero column divided by the sum of the column. Let Mbe the transpose of the matrix M with each non-zero row divided by the sum of the row. Let d be the damping column vector with d=ˆd if i = u and zero otherwise. Two equations are deﬁned as follows: r and s are two vectors of size |V| and |V| which represent the relevance scores of authorities and similarity scores of hubs. The procedure initializes s with s= 1 iff i = u and zero otherwise. Equations 3 and 4 are then recursively applied until the values converge. The list of recommendations is the set of authorities Vsorted by the values in r. Opinion-biased algorithm (OBA). Besides these networkbased classic recommenders, we also consider an idealized algorithm that recommends links by matching nodes with a similar opinion. Considering an opinion vector o, the opinion distance between u and v is simply the difference d= |o− o|. Therefore, as in (Sˆırbu et al. 2019), we deﬁne their opinion-biased recommendation score as where γ tunes the importance of similarity: as γ increases, the recommendation between similar nodes is more likely. Normalization of recommenders. Finally, an important issue is how to make the effect of the recommenders comparable. As stated before, each recommender’s procedure derives different recommendation scores, expressing the strengths of their recommendations. Indeed, every recommendation algorithm generates a different list of ranked links for each node. Even if their scores are bounded, the scale and distribution of these scores may intrinsically depend on the nature of the recommender and its similarity index. To ensure that all results are comparable among the different models, we implement a quantile transformation of the recommendation probabilities’ distribution, which allows us to keep the monotonicity of the ranking scores and scale the distribution to a uniform one. Speciﬁcally, we use a probability integral transform: given a random variable X distributed according to the cumulative distribution function F(CDF), then we deﬁne Y = F(X), thus having a uniform distribution. In practice, to empirically estimate Ffor a given recommender, we draw a large sample of recommendation scores at the beginning of the simulation. Then, each time a recommender is used in the process, the probability of recommendation is transformed accordingly. In this section, we are going to discuss how to use PROD in order to evaluate the effect of a given recommender algorithm on echo chambers and polarization. The proposed evaluation methodology consists of the following steps: 1. Consider a grid of parameters µ, η, representing networks with different modularity and initial homophily (see details in Section 4.1). 2. For each pair of parameters µ, η generate a sequence G of K random graphs with opinions. 3. On each graph G ∈ G, run PROD (Algorithm 1) without any recommender algorithm (i.e., with R= 0), obtaining a network G. 4. Then, on each graph G ∈ G, run PROD with the studied recommender algorithm `, obtaining G. 5. Considering a metric m for echo chambers or polarization (see section 4.2), compute m(G), m(G), m(G). 6. Assess the average difference ∆m between the two cases. Since the initial measure m(G) is the same with and without recommender, we obtain 7. Perform a Kolmogorov-Smirnov test comparing the distribution of differences in the two cases, determining whether the observed effect is statistically signiﬁcant. In the remainder of this section we are going to discuss the random network model we designed, which extends the model by Lancichinetti, Fortunato, and Radicchi (2008) with opinions. Then, we are going to discuss the two metrics we use: the neighbor correlation index (NCI), and the random walk controversy score (RWC) (Garimella et al. 2018). In order to study the effect of people recommenders in all possible conﬁgurations of homophily, we need a random network model with different characteristics. First, it needs to have a tunable degree of echo chamber structure. Second, it has to deﬁne opinions as well, coherently with the network structure. Finally, it has to be realistic in its basic features with respect to real social networks. For these reasons, we extended the LFR model proposed by Lancichinetti, Fortunato, and Radicchi (2008). This model allows creating networks with a realistic degree distribution, following a powerlaw, and where each node belongs to a community. In the original work, the authors show the realistic properties of this model. Moreover, its community structure lets us easily deﬁne the opinions of each node. The general assumption is that each node might follow the opinion of their community or might develop an opinion independently from their neighbors. In this way, we decouple and distinguish two main components of the echo-chamber structure of the network: its (initial) homophily, describing how close on average is a node opinion from the opinions of their local community; and its modularity, that describes how segregated are the different communities. The former is introduced by our opinion-aware extension of the original model, while the latter is a parameter of the LFR model. We indicate these parameters η and µ, respectively. The procedure takes as input three parameters: the number of nodes in the graph N, the modularity µ and the initial homophily η, while the output consists of a directed graph G and opinions O ∈ [0, 1]of the nodes. The modularity parameter of the original model µ tunes the ratio of intracommunity edges; increasing this value makes the network more split in communities. From the original model, we obtain a set of edges E and a partition of nodes into communities c : V → C. We note that in the LFR model the sizes of communities are realistic and follow a power-law distribution. To generate opinions, we ﬁrst pick an opinion for each community k ∈ C by drawing o∼ U (0, 1). Then, the opinion of a node v is decided by a Bernoulli trial with probability η. If the outcome is successful, the node assumes the opinion of its community, i.e. o= o; otherwise, it draws a individual opinion o∼ U(0, 1). Hence, higher values of η increase the probability that a node shares the opinion of the other nodes belonging to the same community. With this procedure, we can generate random networks with opinions, by controlling both their initial homophily η and their modularity µ. A network with high values for both will have a very polarized structure. Instead, for instance, low values for η and high values for µ will lead to graphs with well-separated communities, but plenty of variance inside each. We show an example network for each of the four corner cases in Figure 1. In order to measure the effect of the recommender systems in terms of echo chambers and polarization phenomena, we employ two global metrics deﬁned over a graph where each node is labeled with an opinion. The ﬁrst one, that we in- Figure 1: Examples of graphs and opinions obtained with the random network model in four corner cases of the parameter space (homophily η on the x-axis, modularity µ on the y-axis). Colors correspond to the opinion of each node; the size is proportional to the degree of each node. Each community produced by the model has an assigned position in the axis derived from the Fruchterman-Reingold force-directed algorithm (Kobourov 2012). For each node, we draw random coordinates around the correspondent center of the assigned community. Here the density is constant in all graphs. troduce, is Neighbor Correlation Index (NCI), which measures the similarity between each node and its neighbors, thus quantifying the echo-chamber effect. The second one, borrowed from the literature, is the Random Walk Controversy score (RWC), which measures the polarization of the network, in terms of random walks. Neighbors Correlation Index (NCI). We deﬁne NCI as the Pearson correlation ρ(o, o) between the opinion vector o, and the average opinion of each node’s neighbors, that is Therefore, NCI is bounded between [−1, 1]. The value −1 represents perfect anticorrelation: each node has exactly the opposite opinion of its neighbors. Instead, 1 represents perfect correlation: each node has exactly the same opinion of all the nodes they follow—i.e., they are embedded in perfect echo chambers. Random Walk Controversy score (RWC). In order to measure polarization, we employ the Random Walk Controversy score as deﬁned by Garimella et al. (2018). This measure accounts for the probability that a random user could be exposed to authoritative content from the opposite side. Given two disjoint components of the graph X and Y , the Random Walk Controversy score is where Pis the probability for a random walker that ends in partition j to have started in partition i. In our case, we deﬁne X (resp. Y ) as the set of nodes v with opinion o< 0.5 (resp. o> 0.5). This measure is not inﬂuenced by the size of the components and the total degree of the nodes in the two partitions, and it is bounded between −1 and 1. High values correspond to a low probability of crossing the partitions w.r.t. staying in the same partition: therefore, it means that the two sides are very well separated, and thus that the network is polarized. Oppositely, values around 0 in this metric reﬂect an equal probability to cross sides and to stay in the same one. In practice, we follow the suggested implementation (Garimella et al. 2018) and use random walk with restart, forcing a restart when the random walk reaches a high-degree node (speciﬁcally, over the 95percentile of the degree distribution). An important distinction between the two metrics is that since RWC is based on random walks, this metric incorporates similarities between distant nodes. Instead, NCI captures local dynamics, by measuring how much each node’s opinion is echoed by its immediate neighbors. In this section, we present the results we obtain by applying PROD using the ODMs of Section 3.1 and the people recommenders of Section 3.2. To foster reproducibility, we publicly release all the code of our experiments at https://github.com/FedericoCinus/PROD-ICWSM2022. In the experiments presented next, the parameters are ﬁxed as follows. We generate networks with 400 nodes and ∼5500 edges. In order to avoid disconnected graphs, we set Rby increasing it in small steps and taking the last value before the graph results disconnected after running PROD. In this way, we obtain R= 0.4 · |E|. However, our results are qualitatively similar with different values of the ratio R/|E|. The parameter Tis set to 5000 for BCM and 100 for the epistemological model. The number of interactions S is set to 2 in order to allow for mixed interactions (both existing edges and recommended ones) at each iteration. For BCM, the internal parameters µ and  are set to 0.2. For the epistemological model, the parameters  and n are set to 0.005 and 15. With this choice of parameters, we run the procedure outlined in Section 4, running K = 500 simulations with each of the given recommenders. We repeat this process varying the parameters of the random network model, in order to estimate the effect of the recommender over a range of graphs with different initial modularity and homophily; speciﬁcally, we test η ∈ [0.2, 0.8] and µ ∈ [0.05, 0.95]. We present both models’ results for the NCI metric in Figure 2 and for the RWC metric in Figure 3. In each of these ﬁgures, the x-axis corresponds to the initial homophily η, while the y-axis to the initial modularity µ of the network. Figure 2: ∆NCI for the epistemological model (left half) and for the BCM model (right half). Each heatmap represents a given recommender and colors represent ∆NCI under different initial conditions (homophily η on x-axis, modularity µ on y-axis). Numbers are shown when the difference is statistically signiﬁcant (p < 0.05). Asterisks further represent levels of signiﬁcance (** is p < 0.01, *** is p < 0.001). Therefore, each region of the map corresponds to a certain region of the space of possible initial conditions of the network; examples of these initial conditions are shown in Figure 1. Since the color represents the difference in our metric between a scenario with a recommender and one without(i) Homophilic links—i.e., links connecting nodes with the (Equation 5), areas with a more intense shade of red indicate an increase in echo chambers (for NCI) or polarization (for RWC) when a recommender system is used. In each(ii) The initial network is not already segregated in polarplot, we mark an entry with a number only if it is signiﬁcant (p < 0.05) according to the Kolmogorov-Smirnov test. Asterisks represent further levels of signiﬁcance. Therefore, each of these plots is a ﬁngerprint of one recommender system, when considering a speciﬁc metric and opinion dynamics model. In the following, we will analyze ﬁrst the results we obtained regarding echo-chamber behavior using NCI (Section 5.1), and then regarding polarization using RWC (Section 5.2). Then, we explore how our results can change under different assumptions, such as different rewiring rules or susceptibility to recommendations (Section 5.3). Finally, we show how our framework can be used to assess the impact of intervention policies on recommender systems (Section 5.4). Let us now focus on the effect of recommenders on echo chambers, as measured by the NCI metric, by looking at Figure 2. Firstly, we ﬁnd that all the recommenders signiﬁcantly increase echo chambers for some initial conditions. In particular, we always observe an increase when the following two conditions are met: same opinion—are at least half of the initial links of the network (i.e., η > 0.5). ized communities, but there are a large fraction of intercommunity links (i.e., µ < 0.3). For this type of network (highly homophilic, but not well modularized) the effect of people recommenders is always to increase echo chambers, w.r.t. a scenario where no algorithm was introduced. This ﬁnding is consistent across all recommenders and opinion dynamics models. It is interesting to note, however, that for Personalized PageRank this effect is slightly more intense when the damping factor is lower. This ﬁnding is expected since a lower damping factor corresponds to recommendations being more personalized, while a higher damping factor prioritizes nodes that are central for the whole network. Therefore, the more recommendations are personalized, the more we ﬁnd that they can contribute to the rise of echo chambers. Instead, we observe a different effect in other regions of the initial conditions space. When the initial graph is not homophilic (i.e., η < 0.5), the effect of the recommender is Figure 3: ∆RWC for the epistemological model (left half) and for the BCM model (right half). Each heatmap represents a given recommender and colors represent ∆NCI and ∆RWC under different initial conditions (homophily η on x-axis, modularity µ on y-axis). Numbers are shown when the difference is statistically signiﬁcant (p < 0.05). Asterisks further represent levels of signiﬁcance (** is p < 0.01, *** is p < 0.001). in general very small, and possibly even in the opposite direction w.r.t. the null model with no recommender. In other words, the effect of recommenders on homophily is to amplify the initial bias present in the network. A similar—but stronger—pattern can be noticed when the network is highly modularized. Here, we also observe some differences between different recommenders. If enough inter-community links are present in the initial network (µ > 0.5), then the effect of DJI is mostly nonsigniﬁcant. Instead, for PPR and SALSA, we observe a large reduction in the echo-chamber effect when such algorithms are used. In other words, if the network is not very segregated, recommenders increase homophily and echo chambers; but, if the network is already very divided into communities, some recommenders might have the opposite effect, and “shufﬂe together” different communities. The algorithms where we observe this effect are those that are able to recommend distant nodes. Finally, we highlight that these effects hold even for the opinion-biased recommender; however, for this recommender, the overall effect is always of increasing the echo chamber in the network. This result conﬁrms that such an idealized recommender is useful as a benchmark, showing what happens when recommendations are a result of opinions only, without considering the network structure. We further investigate our ﬁndings in Figure 4, by observing a concrete example with two simulated graphs. Here we highlight which nodes are part of an echo chamber, by setting their transparency as proportional to their contribution in the NCI metric—i.e., how correlated are their opinions to the opinions of their neighbors. We observe that in high homophily and low modularity setting, echo chambers visibly emerge when a recommender is considered, while they do not in the null model without a recommender. Instead, when the network is already polarized (i.e., with high initial modularity), the effects of recommenders are negligible. 5.2 Findings on polarization Now, we turn our attention to the effect of recommenders on polarization, as measured by the RWC metric, by looking at Figure 3. First of all, in this case, results are very different between Jaccard Index and random walk-based recommenders, Personalized PageRank and SALSA, for all initial conditions. In the general case, in fact, while the former type of recommenders obtains a small negative effect on polarization w.r.t. the null model, the latter is increasing it signiﬁcantly. We hypothesize that this difference is caused by the information that these two types of recommenders are considering. Since random walk-based recommenders consider higher distances when making recommendations, they prioritize candidates within one’s own community, even when such a community is larger than a onehop neighborhood. This ends up increasing the separation between the different communities. Instead, Jaccard Index Figure 4: Example of the evolution of networks with two different initial conditions, and three different recommenders. From left to right: (a) initial graph, (b) ﬁnal graph with no recommender, (c) Directed Jaccard (d) Personalized PageRank, (e) OpinionBiased. Colors represent the opinion of each node; transparency represents the correlation of their opinions with their neighborhood (i.e., echo chambers). Each community produced by the random network model has an assigned position in the axis. For each node, we draw random coordinates around the correspondent center of the assigned community. In the ﬁrst row, the initial conﬁguration is η = 0.8, µ = 0.05 (high homophily, low modularity). By looking at the difference between (b) and (c,d,e), we observe an increase in echo chamber behavior due to the recommenders. In the second row with η = 0.8, µ = 0.75, instead, we observe no signiﬁcant difference. keeps in consideration only the immediate neighbors of a node; this results in avoiding increasing the segregation between polarized communities in the global structure of the network. Moreover, since the RWC score is based on how likely is a random walk to cross different communities, it sharply highlights this distinction. This metric is, therefore, useful to distinguish the higher-order effects of the different recommenders, providing useful information to evaluate the long-term consequences of different choices in recommender algorithms. Finally, we highlight that for PPR and SALSA the increasing effect holds in all regions of the initial condition space, except for already polarized networks (high µ, high η). In this case, we observe a saturation phenomenon: the recommender has a smaller effect (for PPR) or even negative (for SALSA) on polarization w.r.t. the null model. Instead, when DJI starts from such a polarized network, it is the only case when it contributes to further polarization, by amplifying the initial separation. As in the previous section, all these effects are consistent across the two opinion dynamics models. Such ﬁndings, therefore, are valid both for the case where opinions are indistinguishable and nodes simply inﬂuence each other and for the case where nodes are trying to form an opinion on a true fact by exchanging observations. In this section, we want to validate the robustness and generalizability of our framework by exploring how changes in the basic assumptions of PROD could impact the results of our analysis. In particular, we evaluate different procedures in terms of rewiring edge selection and individual susceptibility on recommendations. Following the well-known concept of attention budget (Golder, Wilkinson, and Huberman 2007; Huberman, Romero, and Wu 2008), we postulate that each time a new connection is created, an existing one is removed. In the results we presented so far, we followed the most simple possible choice: select an existing edge with uniform probability, as done in previous work Sasahara et al. (2021). However, it is important to assess to which extent this design choice inﬂuences our outcomes. For this reason, we consider two rewiring policy alternatives: an opinion-based rewiring that picks the edge to remove with a probability proportional to the opinion distance between the two nodes; and a degreebased rewiring, inspired by preferential attachment, where the edge is selected with probability inversely proportional to the degree of the node to unfollow. We repeat previous experiments with each of these two policies. For simplicity, we limit this analysis to the PPR recommendation algorithm and to the four extremal conﬁgurations of η and µ. We present results in the leftmost columns of Table 1. Table 1: Comparison between the standard model and two rewiring procedures (opinion-based and degree-based) and two users’ susceptibility distributions (uniform and power-law). EPI and BCM represent the two opinion dynamics models. Each row represents a pair of values of initial homophily η and modularity µ. We report results for each experiment in terms of our two metrics ∆N CI and ∆RW C. Our standard model relies on a uniform rewiring procedure and constant susceptibility for all nodes. In bold, we highlight cases that differ from the standard model by more than 0.1. They show quantitatively comparable outcomes between the standard model, which employs a random uniform rewiring procedure, and the degree-based policy. Instead, as one could expect, the rewiring based on the opinion diversity is disruptive, since it greatly ampliﬁes the polarizing effect. In1. Random uniform strategy: p is uniform over the non exother words, all our previous ﬁndings seem conﬁrmed when the user choices are not directly driven by opinion-based consideration, which of course can explain echo-chamber2. Opinion diversity strategy: p is proportional to the opinion effects by itself; however, we have seen how such an assumption is not necessary, since under some conﬁgurations recommender systems alone can produce an increase in echo chambers.3. Degree-based strategy: p is higher for nodes with higher Then, we perform experiments challenging our assumption that all nodes have an equal probability α to accept the given recommendation, and observe what happens when each node has an individual susceptibility to recommendations. We test what happens with two different choices to draw this susceptibility, a uniform distribution where α∼ U (0, m) and a power-law α∼ 1 − m · x. In both cases, we set m in order to satisfy E[α] = α. We present these results on the rightmost columns of Table 1. By comparing these values with the standard model ones, we ﬁnd that such a change does not alter signiﬁcantly our results in all conﬁgurations and recommender algorithms. Similar and consistent results have been achieved with the other recommendation algorithms and in all conﬁgurations, thus corroborating the robustness of our ﬁndings. 5.4 Intervention policies Finally, in this section, we explore how to use our framework to evaluate the impact of intervention policies in the context of mitigation of echo-chamber and polarization effects. We deﬁned three intervention procedures working on top of the recommender system. In particular, given an edge from the recommender, we replace it, with probability ξ, with another edge selected according to a probability p; more precisely, we iterate over possible edges in a random order, and for each one evaluate a Bernoullian with probability p, until it is successful. This probability relies on one of the following strategies. isting edge set. The original recommendation is therefore modiﬁed in order to pursue serendipity. difference of the nodes, i.e. p = |o− o|; here, we try to bridge individuals belonging to different echo chambers. degrees, according to a sigmoid: p = 1/(1 + e), where x is the in-degree of the recommended node and bd is the average in-degree of the network); the idea is to leverage popular individuals to break echo chambers, as suggested by Elmas et al. (2020). These three strategies have different degrees of real-world applicability: for instance, a social network user might be more likely to follow a celebrity (i.e. a high-degree node) than a random social media user; following a differentminded individual might be even more unlikely in practice. However, for the purpose of this work, we are interested only in analyzing the impact of these idealized policies in mitigating echo-chamber effects. We test these three strategies on top of the personalized PageRank algorithm. Results are presented in Figure 5. They show that the in-degree strategy and the uniform strategy have a comparable impact in reducing the echo chamber effect, with a slightly better effect for the latter. As expected, the opinion-based strategy results to be more effective because it directly targets the opinions divergence between the users, and this effect is more prominent in terms of the correlation metric (NCI). Furthermore, we observe that even low values of intervention probability are already sufﬁcient for reversing the effect on both metrics. Figure 5: ∆NCI (ﬁrst row) and ∆RWC (second row) as a function of the intervention probability ξ, for each intervention procedure and each model: BCM (left half) and Epistemological (right half). In this work, we propose a Monte Carlo simulation procedure that combines opinion dynamics modeling and realworld recommender systems, we quantify the effect of people recommenders in social media platforms on the formation of echo chambers and polarization. We systematically explore realistic network scenarios, in terms of homophily, modularity, and power-law degree distribution, by extending a previously proposed network model (Lancichinetti, Fortunato, and Radicchi 2008) by considering opinions on each node. Thanks to this model, we are able to perform such analysis in a wide range of initial conditions, identifying and exploring two orthogonal dimensions of echo chambers, homophily and modularity. We consider two complementary opinion-dynamics models, the Bounded Conﬁdence Model (Deffuant et al. 2000) and the epistemological model by Bala and Goyal (1998). Our ﬁndings are robust across the different opinion dynamics models and people recommenders tested. We show that the effect of such algorithms is remarkable w.r.t. the null-model and, moreover, prominent when certain initial conditions are met. The emergence of echo chambers is mostly reinforced by such algorithms when the graph structure is not already modularized, but homophilic connections are prevalent; this ﬁnding is consistent for all algorithms, even if with different magnitudes. The overall polarization shows an increasing trend when the graph is not modularized and tends to a saturation point—with a slightly positive or sometimes negative effect—when the initial conditions are of high homophily and segregation. In this regard, we are able to highlight a signiﬁcant difference across recommenders. We argue that such differences are a result of the tendency of some recommenders to focus on local neighborhoods rather than the global structure. Finally, we remark that our framework is able to assess that such ﬁndings are in general statistically signiﬁcant. More in general, the goal of this work is to deﬁne the set of assumptions needed for an increase in echo chamber and polarization to be a direct consequence of recommendation algorithms. We ﬁnd that while opinion-biased user behavior can easily explain such effects (Table 1), in general this assumption is not necessary: the action of recommenders can cause a surge in echo chambers, as long as some initial conditions are met. Such ﬁndings are robust across a wide range of models, algorithms, and design choices. Nonetheless, we acknowledge that more complex models could be tested: for instance, we assume a static network, where the number of nodes and edges is kept approximately constant over time. Yet, our experiments with a rewiring rule that resembles preferential attachment yielded very similar results. We speculate that these kinds of dynamic networks could present similar behavior. Like other simulation-based studies, our work lacks a direct, quantitative comparison with real-world data, which is obviously difﬁcult to achieve. In fact, it is impossible in most real cases to observe the counterfactual: for a given set of users, simultaneously observing their behavior with and without a recommender system operating. Our goal is therefore to reproduce phenomena actually observed in real cases, echo-chamber and polarization. In order to investigate a causal link between them and recommendation algorithms, it is important, in fact, to have ﬁrst a formal model of how the two are connected, and to delimit a minimal and realistic set of assumptions for this causal link to exist. This work is therefore a step in this direction, and as such it opens directions for future research. Among all, different model extensions regarding multidimensional opinions could be of interest. From an applicative perspective, our framework could be used as a guideline to design and analyze other existing algorithms in order to assess their interplay with echo chambers. For instance, one could investigate more complex recommendation algorithms, considering a combination of content-based, graphbased, and interaction-based methods together with recent network embeddings techniques. Moreover, it can be used to evaluate algorithms able to mitigate echo-chamber effects. We sketched how such an analysis can work, by comparing the effect of possible intervention strategies.