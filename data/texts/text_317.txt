GESIS – Leibniz-Institute for the Social Sciences, Cologne, Germany University of Koblenz-Landau, Koblenz, Germany HumTec Institute, RWTH Aachen University, Aachen, Germany Central European University, Vienna, Austria Complexity Science Hub, Vienna, Austria karimi@csh.ac.at Though algorithms promise many beneﬁts including efﬁciency, objectivity and accuracy, they may also introduce or amplify biases. Here we study two well-known algorithms, namely PageRank and Who-to-Follow (WTF), and show under which circumstances their ranks produce inequality and inequity when applied to directed social networks. To this end, we propose a directed network model with on the rank distributions of these algorithms. Our main ﬁndings suggest that (i) inequality is positively correlated with inequity, (ii) inequality is driven by the interplay between preferential attachment, homophily, node activity and edge density, and (iii) inequity is mainly driven by homophily. In particular, these two algorithms amplify, replicate and reduce inequity in top ranks when majorities are homophilic, neutral and heterophilic, respectively. Moreover, when inequity is ampliﬁed, minorities may improve their visibility in the rank by connecting strategically in the network. For instance, by increasing their homophily when majorities are also homophilic. These ﬁndings shed light on social and algorithmic mechanisms that hinder equality and equity in network-based ranking and recommendation algorithms. Online social networks and information networks have become integral parts of our everyday life. However, the opportunities offered by such networks are often constrained not only by our previous interactions algorithms could make some people or content more visible than others via ranking or recommendations search engines and recommender systems are increasingly used for various applications such as whom to follow, whom to cite, or whom to hire. Typically, these applications use algorithms to order items (e.g., people and academic papers) based on “importance” or “relevance”, and may therefore produce social inequalities by discriminating certain individuals or groups of people in top ranks. In fact, it has been shown that recommender systems such as Who-to-Follow (WTF) the popularity of users who are already popular ranks stabilize their position and give little opportunity to other nodes to occupy higher positions “popular” arises because these algorithms harness structural information, in particular the in- and out-degree of nodes. and groups in the ranking. For example, previous studies have shown that homophily affects the visibility of minorities in degree rankings effect multiple structural properties can alter the visibility of minorities in top ranks from ranking and recommendation algorithms. A further complication is that debiasing ranking outcomes and making them fair is very challenging. First, fairness is an essentially contested construct that has different theoretical understandings in different contexts due to missing data in different ways outcome This paper is a step towards this goal. Since such algorithms are so deeply involved in social, economic and political processes, we need to ﬁrst understand how our connections affect them to then apply appropriate interventions towards fair results. It encodes two main mechanisms of edge formation found in social networks: homophily and preferential attachment Moreover, it allows to control for the fraction of minorities, edge density, and the skewness of the out-degree distribution. By However, social networks are complex systems and many other structural properties may also alter the distribution of nodes and the invisibility syndrome. Despite these ﬁndings, little is known about the extent to which the combination of . While most of these studies tackle fairness in ranking, they do not explore the effects of networked data in ranking. To this end, we propose DPAH, a network model that generates directed scale-free networks with binary-attributed nodes. using this model we systematically study how these structural properties of social networks impact the ranking of nodes in PageRank and WTF. In particular, we investigate two ranking issues, inequality and inequity, and show how they get affected by the ranking algorithm together with the type of network. We measure inequality by quantifying the skewness of the rank distribution of nodes that PageRank and WTF produce, and inequity as how well-represented the minorities are in the top of the rank compared to the proportion of minorities in the network. In this work we study both ranking issues and measure their correlation. Furthermore, we quantify them globally using the whole rank distribution, and locally within each top-k% rank. The goal is to identify both the overall inequality and inequity trend that these algorithms produce, and the tipping points where minorities start gaining visibility in the top of the rank. nodes, minority (orange) and majority (blue), and different levels of homophily within groups. Homophily ranging from 0 to 1 and determines the tendency of two nodes of the same color to be connected. homophily within majorities and minorities, respectively. When nodes are ranked using PageRank (second row), the position of the minorities in the rank varies systematically. For instance, when majorities are heterophilic ( minorities often appear at the top (+). In contrast, when majorities are homophilic ( tend to appear at the tail of the rank (-). Next, we explain this systematic ranking behavior in top ranks by further varying the structure of the network. Inequality and inequity in ranking Inequality refers to the dispersion or distribution of importance among individuals. This importance is the ranking score assigned to every node by the algorithm. We compute the Gini coefﬁcient of the rank distribution to measure how far the ranking scores of individuals deviate from a totally equal distribution. As shown in Figure 2, a very low Gini score ( means that all individuals in the network (or in the top-k% for local inequality) are very similar with respect to their ranking scores. If the Gini score is extremely high ( words, the rank distribution is very skewed. Values in between ( From our example in Figure 1, we see that PageRank on average generates moderate skewed ranking distributions for all the depicted networks ( individuals possess very similar ranking scores. top-k% and a given fair baseline (e.g., a diversity constraint or quota). This baseline may be adjusted depending on the context of the application network (i.e., disparate impact fairness or realistic overview and local inequity in two steps. First, we compute the fraction of minorities that appear in each top-k% rank (orange line). Second, we compute the error between the observed fraction of minorities in each top-k% rank and a fair baseline (e.g., the actual fraction of minorities in the network, in this example determine the global inequity score ( region). The value of ME > β region), otherwise the ranking is representing very well the minorities in the top of the rank. Alternatively, we can say that the top rank (i) replicates the levels of inequity from the network when harms the minority group when achieves inequity, see Figure 2. Growth network model with homophily and directed links In order to examine the effect of homophily on the ranking of minorities in social networks, ﬁrst we need to develop realistic network models that capture not only a variety of group mixing, but also the directionality of links. Many online social networks are directed networks in their nature, including the follower-followee structure on Twitter and the hyperlink structure of the Web. Directed links are the key components of many algorithms such as PageRank and Who-to-Follow. DPAH ( the fraction of minorities refer to the minority group as As an example, consider the directed networks shown in Figure 1. Every column represents a network with two types of Inequity refers to group fairness. In particular, it measures the error distance between the fraction of minorities in the MEthe mean of these errors across all top-k% ranks or global inequity. As shown in Figure 1 last row, we measure the , then minorities are over-represented (blue region) in the top-k%. IfME < −β, then they are under-represented (red Finally, we refer to the relationship between inequality and inequity as disparity. For example, if a ranking distribution Gini = 0.65andME = 0.5, we say that the disparity lies in the regionIII(dark blue), i.e., high inequality and high To this end, we propose a directed network model with adjustable homophily and minority size, and we refer to it as directedpreferentialattachment withhomophily network growth model). We generate these networks by adjusting score is drawn from a power-law distribution and determines with what probability the existing node becomes active and creates additional links to other nodes. This means that more active nodes possess higher out-degree (see Methods for more details). Then, that is based on follow a seemingly power-law distribution that have been observed in many large social networks the network reaches an expected density. Note that source nodes can be either new nodes joining the network for the ﬁrst time (e.g., node the source node becomes available in the next rounds to become a target candidate. This means that in the beginning the model faces a cold start problem since there are no existing (target) nodes to connect to. Thus, the ﬁrst 1% of new edges are between a source node (drawn from the activity distribution) and any other node with probability as in Equation (3). How do homophily and directional links inﬂuence the ranking of minorities globally and locally? Global disparity. III; dark colors) for both PageRank (see Figure 4) and WTF (see Figure S1 in the supplementary material). Moreover, we ﬁnd that on average: (i) Balanced networks ( homophily scores ( minorities ( two regimes: First, when both groups are homophilic, homophily within minorities must be higher than homophily within majorities ( homophily within minorities (h Local disparity. when k% increases. In the case of PageRank, we see in Figure 5 that inequality varies (i.e., from light to dark colors) in different regimes mainly due to the size of light colors), this means that nodes at the very top possess very similar ranking scores, but they are very far from the rest of the population, i.e., the larger the top-k%, the higher the Gini. This holds in WTF up to roughly the top-30% (see Figure S2 in the supplementary material). Overall, PageRank converges to high inequality faster than WTF. (ii) Inequity (regions: red, blue, green) is consistent across all top-k% ranks for both algorithms. In other words, if the ranking algorithm favors or harms one group in the top-5%, it will continue to do so until converging to the fair regime (regions II, V, VIII; green). With a few exceptions, this fair regime is only reached when the top-5%, it will remain under-represented at the top-80% (see Figure S2 in the supplementary material for WTF). (iii) Minorities are often over-represented when majorities are heterophilic ampliﬁes inequity at the top-5%, it will also amplify inequity at larger top-k%’s. Therefore, increasing the selection pool (larger k) does not improve the representation of minorities. This can be explained by the fact that the preferential attachment mechanism disproportionately affects nodes ranking Correlation and feature importance. random forest regression to measure the importance of each network property on both inequality and inequity values. Results are shown in Table 1 for PageRank and Table S1 (in the supplementary material) for WTF. the rank distribution (i.e., high Gini), the more unfair with either group (i.e., mean error far from zero), and vice versa. This correlation is stronger and more signiﬁcant in PageRank than in WTF. homophily within majorities. Local inequality ( inequity (me inequality and inequity in the rank, their interplay with minority nodes can change or intensify the direction of bias. In fact, both homophily values can explain inequity, and nodes explain 84% (86%) of gini Figure 3 (a) illustrates the DPAH model. At timet, a source nodepis selected with a probability proportional to its activity. pconnects to an existing nodejwith a probability related to their pair-wise homophilyhand preferential attachment pat timet) or existing nodes (e.g., nodelat timet + 1). Once a source node connects to a target node successfully, f≤ 0.5). (ii) When the fraction of minorities decreases (f< 0.5), groups can be fairly represented in the rank in h> h> 0.5). Second, when both groups are heterophilic, homophily within majorities must be higher than . In particular: (i) Only at the top-5% of the rank we see a few cases of low inequality (regions VII, VIII and IX; very < 0.5; (regions III, VI, IX; blue). In contrast, minorities are often under-represented when majorities are homophilic > 0.5 (regions I, IV, VII; red). This is consistent up to ≈ top-80% for both algorithms. In summary, our results suggest that the size ofkdoes not have an inﬂuence on inequity. This means that if the algorithm We ﬁnd that inequality and inequity are positively correlated in both global and local regimes. In other words, the skewer Global inequality (gini) is mainly explained by both homophily values, whereas global inequity (me) is mainly driven by These results are in agreement with what we see in previous ﬁgures; Even though majority nodes produce most of the Table 1. 10-fold cross-validation for PageRank: We use a Random Forest Regressor to assess model performance and feature importance. R order based on their mean importance (from left to right) and highlighted if their importance represents more than 50% of the total importance. Corr shows the Spearman correlation between inequality and inequity scores (p-values ≈0). How do different social mechanisms of edge formation contribute to disparity? So far, we show that PageRank and WTF on our network model produce high inequality and a wide-range of possible inequity outcomes. How much of that inequality or inequity was a product of homophily or preferential attachment? To see the effects of these two mechanisms alone, we generate new networks by turning on and off the homophily and preferential attachment features (see Methods for the details of the models). Attachment), DH (Directed Homophily), Random, and DPAH (see Figure S3 in the supplementary material for WTF). Results from both algorithms show that networks whose nodes connect through preferential attachment (DPA) produce on average higher inequality compared to DH and Random. However, when preferential attachment is combined with homophily (DPAH), this inequality increases even further. Additionally, we see that WTF produces higher inequality compared to PageRank (see section A.3 in the supplementary material for more details). Inequity, on the other hand, is mainly driven by homophily. This means that, homophily (DPAH and DH) inﬂuences both, inequality and inequity in both algorithms. in the supplementary material, we see that edge density also plays a role in the inequality produced by PageRank and WTF. This means that, by further adjusting these two parameters (node activity and edge density), we would expect changes only to inequality since inequity is mainly affected by homophily as we saw before. Strategies towards a fair ranking Results from both algorithms show that while the homophily within majorities is the main driver for inequality and inequity, minorities may overcome unfair rankings by connecting strategically in the network. In general, when majorities are homophilic over-represented in the rank. Finally, when majorities are heterophilic increase the size of the minority group, and make sure that both groups behave similarly in terms of homophily ( Otherwise, minorities will be over-represented regardless of their in-group homophily. Note that these “strategies” without algorithmic intervention may work in scenarios such as a citation or collaboration networks, but they might not work in other scenarios. In such cases, we need additional recommender systems to help under-represented groups discover those “strategic” links that will help them climb to higher ranks. In this work we have proposed a systematic study to measure the inequality and inequity produced by PageRank and Who-ToFollow (WTF). Our approach disentangles the effect of network structure on the rank distributions of these two algorithms by using synthetic networks. By doing so, we control for the properties of the network and measure how these changes affect the rankings. In particular, we studied six prominent structural properties of social networks: homophily, preferential attachment, fraction of minorities, edge density, node activity and the directionality of links. that the systemic bias produced by these algorithms in the rank—in particular inequity—is mainly due to homophily imbalance process as it is done for correcting the class imbalance problem in supervised learning necessary conditions to achieve a fair rank. These conditions can be implemented in ranking and recommendation algorithms to strategically adjust the importance of connections in a given network. In certain applications such as citation or collaboration Figure 6 shows the inequality and inequity produced by PageRank on a variety of models: DPA (Directed Preferential Note that in Figure 6, we ﬁxed the activity of nodes toγ= γ= 3.0. However, when we set these parameters to = γ< 3.0(lower values), inequality decreases, see Figure S4 in the supplementary material. Additionally, in Figure S5 > 0.5, minorities should increase their homophily such thath> h. When majorities are (somewhat) neutral = 0.5 ±0.1), minorities may connect arbitrarily with any group without being too homophilic, otherwise they will become Consequently, our systematic study makes PageRank and Who-To-Follow interpretable and explainable. Our results show  horh h). A potential avenue to reduce inequity is to create synthetic connections during the ranking networks, these strategies can be recommended through additional recommendation algorithms. For instance, recommender systems could suggest relevant articles not only based on popularity and (keyword) similarity but also based on fairness by fulﬁlling diversity constraints. Finally, further research can investigate other social mechanisms of edge formation that have been seen in social networks such as clustering monophily In this work we have investigated under which conditions PageRank and Who-To-Follow (WTF) replicate, amplify or reduce inequality and inequity in top ranks. In particular, given the rank distribution produced by these algorithms, we computed inequality as the dispersion among individuals in terms of ranking scores, and inequity as whether minorities are over-, underor well-represented in top ranks compared to their representation in the network. We studied these two metrics separately and in combination to better understand the mechanisms that can explain them. with different levels of homophily, fraction of minorities, node activity, and edge density. In these networks, we found that both inequality and inequity are positively correlated and mainly driven by the homophily within majorities. This means that, when the majority group is highly homophilic, the minority group is under-represented in top ranks. Also, when the majority is highly heterophilic, the minority beneﬁts tremendously since it is over-represented in the top-k%. However, minorities can overcome these disparities by connecting strategically with others. Thus, equity in ranking is a trade-off between homophily and the fraction of minorities. and estimate the disparity that these algorithms produce given the structure of networks, which is key for proposing targeted interventions. We hope our results create awareness among majority and minority groups about these disparities since they may replicate and even amplify the biases found in social networks. Synthetic networks We propose DPAH, a with activity distributions PageRank and WTF separately, and inequality and inequity scores are computed and averaged accordingly for each algorithm. Directed network We deﬁne a directed network as: Let nodes, the class membership of node C—in the network. We refer to the minority group as labels have the same number of nodes ( f node that determines with what probability the existing node becomes active and creates additional links to other nodes. It has been shown that in empirical networks the activity of the nodes follows a power-law distribution activity to each node drawn from a power-law distribution. Note that each group possess its own activity distribution and they are deﬁned by its power-law exponent γ connecting to v Preferential Attachment (DPA) Also known as the rich-get-richer effect or cumulative advantage in social networks to popular nodes. We deﬁne popularity as the in-degree of the node. Therefore, the probability that a source node a target node v To that end, we proposed DPAH, a growth network model that allows to generate realistic scale-free directed networks Our systematic study makes PageRank and Who-to-Follow explainable and interpretable to help data scientists understand n = 2000number of nodes, edge density ofd = 0.0015, and adjust ﬁve network properties: fraction of minorities ∈ {0.1,0.2, 0.3,0.4,0.5}, in-class or group homophilyh,h∈ {0.0,0.1, ...,1.0}, and the power-law exponents of the E ⊆V ×Va set ofedirected edges, andC = {c,...,c}a list of binary class labels where each elementcrepresents In order to generate directed links, inspired by the activity-driven network model, we assign an activity score to each Then, the probability of connecting a source (active) nodevto a target nodev(or in other words the probability of P(i → j) = P( j|i) =k(1) Homophily (DH) It is the tendency of individuals to connect (or interact) with similar others connects to a target node dyad based on pre-deﬁned homophily parameters within majorities and minorities, values range from more often than nodes of different attributes. Nodes of the same class with homophily they connect randomly to either class), otherwise they are heterophilic if class), or homophilic when h Preferential Attachment with Homophily (DPAH) We propose DPAH combines DPA and DH, and is an extension of the BA-Homophily model out-degree distribution remains the same as in DPAH: it is driven by the activity model. Additionally, we include a random model where both source and target nodes are chosen at random (i.e., Erd adjusted in each model. Number of nodes formation mechanism. Thus, we ﬁx them to make a fair comparison across all models. Table 2. Model parameters: of nodes n, fraction of minorities f distribution γ. Sub-indices M and m refer to the majority and minority groups, respectively. The difference between DH and DPAH is the preferential attachment (in-degree) mechanism. All models produce directed networks. Ranking and Recommendation algorithms There exist a variety of ranking and recommendation algorithms that follow different strategies depending on the nature of the problem. For instance, in information systems, items such as content, Web pages, and products are ranked to recommend users what to read or buy recommended to other users in order to establish new connections algorithms that often rely on whom we are already connected with. In this work, we focus on two such algorithms widely used in practice with all other nodes, WTF deals with ranking nodes in a node level and thus remains a local measure. For that reason, we focus on these two algorithms to capture both dimensions. PageRank It was invented to rank all web pages in the Web and co-authorship networks P(i → j) = P( j|i) =h∑h(2) P(i → j) = P( j|i) =hk(3) Note that DPA and DH are especial cases of DPAH where only the in-degree mechanism varies. This means that, the : PageRankand Who-to-Follow (WTF). While PageRank determines the global ranking of nodes in comparison into account the number and quality of incoming links of each node. The PageRank of node i is deﬁned as follows: where factor fast-pagerank Who-To-Follow (WTF) This recommendation algorithm was created and used by Twitter to suggest new people to follow which in turn is based on Personalized PageRank which is the result of an egocentric random walk (similar to personalized PageRank) algorithm ranks all users that are not yet friends with of these (recommended) users, and add up the counter of being selected as a recommendation to each of them. This is done for every node recommendation across all nodes in the network. Thus, the WTF score for each node is deﬁned as follows: where as recommendations. x ∈A). PR(i) = (1 −α) + αPR( j)k(4) i ∈ G,Nrepresents all neighbors ofi(e.g., all nodesipoints to), andkthe out-degree of nodej. The damping α, or probability of following links using a Random Walker, is set to0.85as suggested by Brin and Page. We use the W T F(i) =1 SALSA( j)refers to the top-k users the SALSA algorithm recommends to nodej. In this work we select the top-10users